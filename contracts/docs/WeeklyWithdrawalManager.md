# WeeklyWithdrawalManager - –°–∏—Å—Ç–µ–º–∞ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –í—ã–≤–æ–¥–∞ –°—Ä–µ–¥—Å—Ç–≤

## –û–±–∑–æ—Ä

`WeeklyWithdrawalManager` - —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≥–∞–∑–∞, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ –æ–±–º–µ–Ω–∞ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç MEV-–∞—Ç–∞–∫.

## –ö–ª—é—á–µ–≤—ã–µ –ò–Ω–Ω–æ–≤–∞—Ü–∏–∏

### üöÄ –ì–∏–±–∫–∏–π –ß–∞—Å—Ç–∏—á–Ω—ã–π –ê–Ω—Å—Ç–µ–π–∫–∏–Ω–≥
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å—É–º–º—É**: —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ shares –¥–ª—è –∞–Ω—Å—Ç–µ–π–∫–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤**: –º–æ–∂–Ω–æ –∞–Ω—Å—Ç–µ–π–∫–∞—Ç—å –ª—é–±—É—é —á–∞—Å—Ç—å –±–∞–ª–∞–Ω—Å–∞
- **–û–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è**: –ø—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üõ°Ô∏è –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Batch Hash**: –∫–∞–∂–¥—ã–π –±–∞—Ç—á –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à
- **Immutable Logic**: –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- **Cryptographic Proof**: —Ö–µ—à —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫–Ω–∞
```
–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00 - –í—Ç–æ—Ä–Ω–∏–∫ 00:00 (24h): –û–∫–Ω–æ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
–í—Ç–æ—Ä–Ω–∏–∫ 00:00 - –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00 (6 –¥–Ω–µ–π): –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥–º–∏–Ω–æ–º
–°–ª–µ–¥—É—é—â–∏–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –î–æ—Å—Ç—É–ø–µ–Ω –≤—ã–≤–æ–¥
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```solidity
uint256 public constant WEEK_DURATION = 7 days;        // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ–¥–µ–ª–∏
uint256 public constant SUBMISSION_WINDOW = 1 days;    // –û–∫–Ω–æ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –°—Ç—Ä—É–∫—Ç—É—Ä—ã

#### WithdrawalBatch
```solidity
struct WithdrawalBatch {
    bytes32 batchHash;                          // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à –±–∞—Ç—á–∞
    uint256 totalAmount;                        // –û–±—â–∞—è —Å—É–º–º–∞ CELL –¥–ª—è –≤—ã–≤–æ–¥–∞
    uint256 totalShares;                        // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∂–∂–µ–Ω–Ω—ã—Ö shares
    uint256 requestCount;                       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫
    uint256 submissionDeadline;                 // –î–µ–¥–ª–∞–π–Ω –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
    bool isApproved;                           // –ë–∞—Ç—á –æ–¥–æ–±—Ä–µ–Ω –∞–¥–º–∏–Ω–æ–º
    mapping(address => uint256) userAmounts;    // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—É–º–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    mapping(address => bool) hasWithdrawn;      // –°—Ç–∞—Ç—É—Å –≤—ã–≤–æ–¥–∞
    address[] requesters;                       // –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–∏—Ç–µ–ª–µ–π
}
```

### –°–∏—Å—Ç–µ–º–∞ –•—Ä–∞–Ω–µ–Ω–∏—è
```solidity
mapping(uint256 => WithdrawalBatch) public withdrawalBatches;  // –Ω–µ–¥–µ–ª—è => –±–∞—Ç—á
mapping(bytes32 => uint256) public batchHashToWeek;            // —Ö–µ—à => –Ω–µ–¥–µ–ª—è
mapping(address => uint256) public userActiveWeek;             // –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å => –∞–∫—Ç–∏–≤–Ω–∞—è –Ω–µ–¥–µ–ª—è
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –§—É–Ω–∫—Ü–∏–∏

#### `requestWithdrawal(uint256 shares)`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ shares

**–õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```solidity
function _requestWithdrawal(uint256 shares) internal {
    require(shares > 0, "Shares must be greater than 0");
    require(_getUserShares(msg.sender) >= shares, "Insufficient shares");
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    require(_isSubmissionWindowOpen(), "Submission window closed");
    require(userActiveWeek[msg.sender] == 0, "Already have active request");
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞—è–≤–∫–µ
    if (batch.submissionDeadline == 0) {
        _initializeBatch(week);
    }
    
    // –§–∏–∫—Å–∞—Ü–∏—è exchange rate –∏ —Ä–∞—Å—á–µ—Ç —Å—É–º–º—ã
    uint256 amount = (shares * _getExchangeRate()) / 1e18;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞—Ç—á–∞
    batch.totalAmount += amount;
    batch.totalShares += shares;
    batch.requestCount++;
    batch.userAmounts[msg.sender] = amount;
    batch.requesters.push(msg.sender);
    
    // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ: —Å–∂–∏–≥–∞–Ω–∏–µ shares –°–†–ê–ó–£
    _transferAndBurnShares(msg.sender, shares);
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ö–µ—à–∞
    batch.batchHash = _generateBatchHash(week, batch.totalAmount, batch.requestCount);
    batchHashToWeek[batch.batchHash] = week;
    
    userActiveWeek[msg.sender] = week;
}
```

#### `completeWithdrawal()`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤

**–£—Å–ª–æ–≤–∏—è:**
- –ë–∞—Ç—á –æ–¥–æ–±—Ä–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (`batch.isApproved = true`)
- –ù–µ–¥–µ–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (`week < currentWeek`)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ —Å–Ω–∏–º–∞–ª (`!hasWithdrawn[user]`)
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å —Å—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ (`userAmounts[user] > 0`)

**–ü—Ä–æ—Ü–µ—Å—Å:**
```solidity
function _completeWithdrawal() internal {
    uint256 week = userActiveWeek[msg.sender];
    WithdrawalBatch storage batch = withdrawalBatches[week];
    
    uint256 amount = batch.userAmounts[msg.sender];
    batch.hasWithdrawn[msg.sender] = true;
    userActiveWeek[msg.sender] = 0;
    
    _transferAssets(msg.sender, amount);  // –ü–µ—Ä–µ–≤–æ–¥ CELL —Ç–æ–∫–µ–Ω–æ–≤
}
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏

#### `approveBatchByHash(bytes32 batchHash)`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–¥–æ–±—Ä–µ–Ω–∏–µ –±–∞—Ç—á–∞ –ø–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º—É —Ö–µ—à—É

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ö–µ—à–∞: `batch.batchHash == batchHash`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è: `week > 0`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ–¥–µ–ª–∏: `week < currentWeek`
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è: `!batch.isApproved`

#### `moveToNextWeek()`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ

**–õ–æ–≥–∏–∫–∞:**
```solidity
function _moveToNextWeek() internal {
    require(!_isSubmissionWindowOpen(), "Submission window still open");
    
    if (batch.totalAmount > 0) {
        emit BatchCreated(week, batch.batchHash, batch.totalAmount, batch.requestCount);
        _initiateNativeUnstaking(batch.totalAmount);  // –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∞–Ω—Å—Ç–µ–π–∫–∞ –Ω–∞ CELL Frame
    }
    
    currentWeek++;
}
```

## –°–∏—Å—Ç–µ–º–∞ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Batch Hash
```solidity
function _generateBatchHash(uint256 week, uint256 totalAmount, uint256 requestCount) 
    internal view returns (bytes32) {
    return keccak256(abi.encodePacked(
        week,                // –ù–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏
        totalAmount,         // –û–±—â–∞—è —Å—É–º–º–∞
        requestCount,        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫
        block.timestamp,     // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
        block.prevrandao     // –≠–Ω—Ç—Ä–æ–ø–∏—è –±–ª–æ–∫–∞
    ));
}
```

### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Hash
- –ö–∞–∂–¥—ã–π –±–∞—Ç—á –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –æ—Ç–ø–µ—á–∞—Ç–æ–∫
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–π –±–∞—Ç—á
- –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í—Ä–µ–º–µ–Ω–µ–º

### –†–∞—Å—á–µ—Ç –ù–µ–¥–µ–ª—å
```solidity
function _getCurrentWeek() internal view returns (uint256) {
    return (block.timestamp - deploymentTime) / WEEK_DURATION;
}

function _getWeekStart(uint256 week) internal view returns (uint256) {
    return deploymentTime + (week * WEEK_DURATION);
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –û–∫–æ–Ω
```solidity
function _isSubmissionWindowOpen() internal view returns (bool) {
    uint256 weekStart = _getWeekStart(currentWeek);
    return block.timestamp >= weekStart && 
           block.timestamp <= weekStart + SUBMISSION_WINDOW;
}
```

## View Functions

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–∞—Ç—á–∞—Ö
```solidity
function getBatchInfo(uint256 week) external view returns (
    bytes32 batchHash,
    uint256 totalAmount,
    uint256 totalShares,
    uint256 requestCount,
    uint256 submissionDeadline,
    bool isApproved
)

function getBatchInfoByHash(bytes32 batchHash) external view returns (
    uint256 week,
    uint256 totalAmount,
    uint256 requestCount,
    bool isApproved
)
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –î–∞–Ω–Ω—ã–µ
```solidity
function getUserRequest(address user) external view returns (
    uint256 week,
    uint256 amount,
    bool hasWithdrawn,
    bool canWithdraw
)

function canUserWithdrawFromBatch(address user, bytes32 batchHash) 
    external view returns (bool canWithdraw, uint256 amount)
```

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```solidity
function isSubmissionWindowOpen() external view returns (bool)
function getTimeUntilNextWindow() external view returns (uint256)
```

## –°–æ–±—ã—Ç–∏—è

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª –ó–∞—è–≤–∫–∏
```solidity
event WithdrawalRequested(
    address indexed user, 
    uint256 indexed week, 
    bytes32 indexed batchHash,
    uint256 shares, 
    uint256 amount
);

event WithdrawalCompleted(
    address indexed user, 
    uint256 indexed week, 
    bytes32 indexed batchHash,
    uint256 amount
);
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–∞—Ç—á–∞–º–∏
```solidity
event BatchCreated(uint256 indexed week, bytes32 indexed batchHash, uint256 totalAmount, uint256 requestCount);
event BatchApproved(uint256 indexed week, bytes32 indexed batchHash, uint256 totalAmount);
```

## –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏

–ù–∞—Å–ª–µ–¥—É—é—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

```solidity
function _getExchangeRate() internal view virtual returns (uint256);
function _getUserShares(address user) internal view virtual returns (uint256);
function _transferAndBurnShares(address user, uint256 shares) internal virtual;
function _transferAssets(address user, uint256 assets) internal virtual;
function _initiateNativeUnstaking(uint256 amount) internal virtual;
```

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª –ë–∞—Ç—á–∞

```
üìÖ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00 - –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
   ‚Üì
üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–¥–∞—é—Ç –∑–∞—è–≤–∫–∏ (—É–∫–∞–∑—ã–≤–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ shares)
   ‚Üì
üî• –£–∫–∞–∑–∞–Ω–Ω—ã–µ shares —Å–∂–∏–≥–∞—é—Ç—Å—è –ù–ï–ú–ï–î–õ–ï–ù–ù–û
   ‚Üì
üìä Exchange rate —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞—è–≤–∫–µ
   ‚Üì
üìÖ –í—Ç–æ—Ä–Ω–∏–∫ 00:00 - –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
   ‚Üì
üîí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ batch hash
   ‚Üì
üåê –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∞–Ω—Å—Ç–µ–π–∫–∞ –Ω–∞ CELL Frame
   ‚Üì
‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä—è–µ—Ç –±–∞—Ç—á –ø–æ hash
   ‚Üì
üìÖ –°–ª–µ–¥—É—é—â–∏–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–Ω–∏–º–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞
   ‚Üì
üí∞ –í—ã–≤–æ–¥ CELL —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üéØ –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∞–Ω—Å—Ç–µ–π–∫–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### ‚õΩ –≠–∫–æ–Ω–æ–º–∏—è –ì–∞–∑–∞
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### üõ°Ô∏è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç MEV –∏ —Ñ—Ä–æ–Ω—Ç—Ä–∞–Ω–Ω–∏–Ω–≥–∞

### üìà –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π exchange rate –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–∞—Ç—á–∞
- –†–∞–≤–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è

`WeeklyWithdrawalManager` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–µ—Ä–µ–¥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–≤–æ–¥–æ–º —Å—Ä–µ–¥—Å—Ç–≤, –æ–±—ä–µ–¥–∏–Ω—è—é—â—É—é –ø—Ä–æ—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é. 